
import { University } from '../types';

/**
 * 2027학년도 모집요강 상세 데이터 (RAG 시스템용 지식 베이스)
 * 실제 데이터 로딩 시에는 외부 API나 JSON 파일에서 가져올 수 있습니다.
 */
const GUIDELINES_2027: Record<string, string> = {
  "연세대": "2027학년도 연세대는 기하 문항의 난이도를 상향 조정하며, 증명 중심의 문항이 2문항 이상 출제될 예정입니다. 과학논술 폐지 이후 수리논술의 변별력이 극대화되었습니다.",
  "고려대": "2027학년도 수리논술 전형이 신설되었습니다. 내신 반영 없이 논술 100%로 선발하며, 최상위권 변별을 위해 확통 및 기하 전 범위에서 고난도 문항이 출제될 가능성이 매우 높습니다.",
  "한양대": "한양대는 2027학년도에도 '수학 실력만으로 선발'하는 기조를 유지합니다. 미적분 심화 문항의 계산량이 작년 대비 15% 증가할 것으로 예측되며, 제시문 없는 단독형 문항이 주를 이룹니다.",
  "성균관대": "2027학년도 성균관대는 확률과 통계 파트에서 실생활 응용 문항을 강화합니다. 제시문 독해를 통한 수식 모델링 역량이 합격의 핵심입니다.",
  "서강대": "서강대는 경제/사회 계열과 자연 계열의 문항 공통 범위가 수학 I, II로 집중되며, 자연 계열은 확통 포함 전 범위에서 논리적 엄밀성을 강조하는 문항이 출제됩니다.",
  "중앙대": "중앙대는 2027학년도에 확통 비중을 30%로 고정했습니다. 특히 케이스 분류와 조합론적 사고력을 요구하는 문항이 필수 출제됩니다.",
  "경희대": "경희대는 2027학년도에 의학계열과 일반 자연계열의 문항 난이도를 차별화합니다. 일반 계열은 미적분 중심, 의학 계열은 기하와 증명 중심입니다.",
  "건국대": "건국대는 함수의 극한과 연속성을 활용한 논증 문항이 매년 출제됩니다. 2027학년도에는 미적분의 기하학적 의미를 묻는 문항이 추가될 예정입니다.",
  "아주대": "아주대는 2027학년도에도 '답안지 60분 2문항' 체제를 유지하며, 한 문항 당 4개 이상의 소문항이 연결된 '계단식 문항'으로 수험생의 서술 체계력을 평가합니다.",
  "가천대": "2027학년도 약술형 논술의 표본인 가천대는 EBS 수능완성과의 연계율을 90% 이상 유지합니다. 단답형보다는 풀이 과정을 3~4줄로 요약하는 능력이 중요합니다.",
  "상명대": "2027학년도 상명대 논술은 수능 최저 학력 기준이 완화되었으나, 수학 II의 기본 정의를 증명하는 형태의 문항이 출제 범위에 포함되었습니다."
};

/**
 * 사용자가 선택한 대학들을 기반으로 관련 2027 모집요강 컨텍스트를 검색하여 반환합니다.
 */
export const retrieveGuidelines = (targetUniversities: string[]): string => {
  const contexts = targetUniversities
    .map(name => {
      // 대학 이름 포함 여부로 매칭
      const key = Object.keys(GUIDELINES_2027).find(k => name.includes(k) || k.includes(name));
      return key ? `[${key} 2027 최신 정보]: ${GUIDELINES_2027[key]}` : null;
    })
    .filter(c => c !== null);

  if (contexts.length === 0) {
    return "현재 분석 중인 대학들의 2027학년도 특정 변동 사항은 확인 중이나, 일반적인 2027 입시 트렌드인 '논술 100% 확대' 및 '선택 과목 전 범위 출제' 기조를 따릅니다.";
  }

  return contexts.join("\n\n");
};
